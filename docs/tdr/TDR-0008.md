# TDR-0008. Дублирование кода для построения URL запросов

## Заголовок
Дублирование кода для построения URL запросов к Telegram API

## Контекст
В проекте обнаружено дублирование кода для построения URL запросов:
1. В `app/tg_api/accessor.py` есть метод `_build_query` и метод `build_url`
2. В `message_service/accessor.py` есть аналогичный метод `_build_query`
3. Оба файла содержат почти идентичный код для построения URL

## Долг
Дублирование кода увеличивает сложность поддержки, так как при внесении изменений в логику построения URL необходимо изменять код в нескольких местах. Это также увеличивает вероятность появления ошибок и усложняет тестирование.

## Влияние
1. Усложнение поддержки кода из-за необходимости вносить изменения в нескольких местах
2. Повышенный риск возникновения ошибок при изменениях
3. Увеличение времени на тестирование
4. Нарушение принципа DRY (Don't Repeat Yourself)
5. Усложнение рефакторинга

## План исправления
1. Создать общий модуль или базовый класс для построения URL запросов
2. Перенести общую логику в этот модуль/класс
3. Обновить оба accessor'а для использования общего кода
4. Написать тесты для проверки корректности построения URL
5. Убедиться, что функциональность осталась неизменной