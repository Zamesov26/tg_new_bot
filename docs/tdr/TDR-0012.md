# TDR-0012. Несоответствия в коде и потенциальные баги

## Заголовок
Несоответствия в коде и потенциальные баги, выявленные анализом

## Контекст
В ходе анализа кода обнаружены следующие несоответствия и потенциальные проблемы:
1. В `app/bot_engine/handlers.py` есть TODO-комментарий: "# TODO заменить на нормальный фильтр"
2. В `app/bot_engine/handlers.py` есть TODO-комментарий: "# TODO вытащить fsm в отдельный слой"
3. В `app/wonderland/handlers/main_menu.py` есть несколько TODO-комментариев, связанных с отправкой сообщений в брокер
4. В файлах с миграциями и кэше ruff обнаружены фрагменты кода, указывающие на возможные проблемы

## Долг
Наличие множества TODO-комментариев указывает на незавершенную работу или временные решения, которые требуют доработки. Эти проблемы могут привести к нестабильной работе приложения или отсутствию важной функциональности.

## Влияние
1. Неполная или неправильная реализация функциональности
2. Потенциальные ошибки в работе приложения
3. Отсутствие важных интеграций (например, с брокером сообщений)
4. Снижение качества и надежности кода
5. Усложнение дальнейшей разработки из-за незавершенных компонентов

## План исправления
1. Провести инвентаризацию всех TODO-комментариев в проекте
2. Приоритизировать задачи по важности и влиянию на функциональность
3. Постепенно реализовать недостающую функциональность
4. Удалить или заменить временные решения на полноценные реализации
5. Добавить тесты для проверки новой функциональности
6. Обновить документацию в соответствии с изменениями